# 2025/11/21 
## Laravelの教科書8章
- リレーションの設定
- EloquentORMについて
	- Eloquent ＝雄弁な
	  ORM=Object-Relation Map
	  「オブジェクトと関連するものをマッピングするもの」
	- モデルを使って、関係するデータベースとの対応付を上手に行ってくれる機能

**条件にあったデータを取得する書き方**
`（モデル名）::where('条件をつけるカラム', '条件')->get();`

```PHP
Post::where('user_id', auth()->id())-get();
```

**条件に合わないデータを取得する書き方**
`（モデル名）::where('条件をつけるカラム', '!=' ,'条件')->get();`

**条件にあったデータを取得する書き方**
`（モデル名）::where('条件をつけるカラム', '条件')->get();`

**日付条件にあったデータを取得する書き方**
`（モデル名）::whereDate('条件をつけるカラム', '>または<', '条件')->get();`

例）2025年11月20日以降に作成された投稿データ取得
```PHP
Post::whereDate('created_at','>=', '2025-11-20')-get();
```

| メソッド         | 用途          | 例                                                           |
| ------------ | ----------- | ----------------------------------------------------------- |
| whereBetween | 2つの値の間      | user_idが1から5<br>whereBetween('user_id', [1, 5])             |
| whereIn      | 指定値のいずれかを含む | user_idが1か5<br>whereIn('user_id', [1, 5])                   |
| whereNull    | NULLのデータ    | user_idがNull<br>whereNull('user_id')                        |
| whereDate    | 日付条件を入れる    | 2022年12月2日より後<br>whereDate('created_at', '>', '2022-12-02') |
| whereMonth   | 月条件を入れる     | 12月より後<br>whereMonth('created_at', '>', '12')               |
| whereDay     | 日にち条件を入れる   | 2日より後<br>whereDay('created_at', '>', '2')                   |
| whereYear    | 年条件を入れる     | 2022年より後<br>whereYear('created_at', '>', '2022')            |
| whereTime    | 時間条件を入れる    | 9時より後<br>whereTime('created_at', '>', '09:00')              |

**複数のデータ取得条件を設定**

```PHP
Post::where('user_id', 1)->whereDate('created_at','>=', '2025-11-20')-get();
```
**orderByでデータの並び替え**

```PHP
Post::orderBy('created_at','desc')-get();
```
**firstやfindを使ってデータを取得**

```PHP
Post::whereDate('created_at','>=', '2025-11-20')-first();
```

